:root {
    --main-bg: #4c6e4d;      /* 纯绿色背景 */
    --board-border: #111;    /* 黑色边框 */
    --brown-light: #d7b98e;  /* 浅棕格子 */
    --brown-dark: #b89364;   /* 深棕格子 */
    --cell-size: 80px;
}

@media (max-width: 500px) { :root { --cell-size: 22vw; } }

body {
    background-color: var(--main-bg);
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: sans-serif;
    color: white;
    touch-action: none;
    overflow: hidden;
}

.game-wrapper { text-align: center; }
.header h1 { margin: 0; font-size: 22px; color: #ffeb3b; }
.header p { margin: 5px 0 15px; font-size: 13px; opacity: 0.8; }

#game-container {
    position: relative;
    padding-bottom: 20px; /* 为突出的出口留出空间 */
}

/* 黑色边框棋盘 */
#game-board {
    position: relative;
    width: calc(var(--cell-size) * 4);
    height: calc(var(--cell-size) * 5);
    background-color: var(--brown-light);
    border: 8px solid var(--board-border);
    border-radius: 4px;
    z-index: 2;
}

/* 突出的棕色出口条 */
.exit-gate {
    position: absolute;
    bottom: 0px; /* 与边框重合 */
    left: 50%;
    transform: translateX(-50%);
    width: calc(var(--cell-size) * 2); /* 2格宽 */
    height: 28px; /* 突出的厚度 */
    background-color: var(--brown-dark);
    border: 8px solid var(--board-border);
    border-top: none; /* 顶端开口，与棋盘连通 */
    z-index: 1;
    border-radius: 0 0 8px 8px;
}

/* 格子纹理实现 */
.grid-overlay {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-image: 
        linear-gradient(45deg, var(--brown-dark) 25%, transparent 25%), 
        linear-gradient(-45deg, var(--brown-dark) 25%, transparent 25%), 
        linear-gradient(45deg, transparent 75%, var(--brown-dark) 75%), 
        linear-gradient(-45deg, transparent 75%, var(--brown-dark) 75%);
    background-size: calc(var(--cell-size) * 2) calc(var(--cell-size) * 2);
    background-position: 0 0, 0 var(--cell-size), var(--cell-size) -var(--cell-size), -var(--cell-size) 0px;
    opacity: 0.4; /* 调整纹理深浅 */
}

.piece {
    position: absolute;
    z-index: 10;
    box-sizing: border-box;
    border: 3px solid #000;
    border-radius: 8px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    color: white;
    text-shadow: 1px 1px 1px #000;
    cursor: grab;
    transition: transform 0.1s ease-out;
}

.instructions { margin-top: 25px; font-size: 13px; opacity: 0.8; }